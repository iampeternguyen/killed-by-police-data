webpackJsonp([1],{"6D5C":function(t,e){},LYrU:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{attrs:{id:"output"}},[a("table",{staticClass:"table table-striped table-hover"},[t._m(0),t._v(" "),a("tbody",t._l(this.$store.state.cData,function(e,n){return a("tr",{staticClass:"active"},[a("td",[t._v(t._s(e.date))]),t._v(" "),a("td",[t._v(t._s(e.state))]),t._v(" "),a("td",[t._v(t._s(e.gender))]),t._v(" "),a("td",[t._v(t._s(e.race))]),t._v(" "),a("td",[t._v(t._s(e.name))]),t._v(" "),a("td",[t._v(t._s(e.age))]),t._v(" "),a("td",t._l(e.killedBy,function(e){return a("span",[t._v(t._s(e))])})),t._v(" "),a("td",[a("a",{attrs:{href:e.kbpLink}},[t._v("Killed by Police Link")])]),t._v(" "),a("td",[a("a",{attrs:{href:e.newsLink}},[t._v("News Link")])])])}))])])])},staticRenderFns:[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("td",[t._v("Date")]),t._v(" "),a("td",[t._v("State")]),t._v(" "),a("td",[t._v("Gender")]),t._v(" "),a("td",[t._v("Race")]),t._v(" "),a("td",[t._v("Name")]),t._v(" "),a("td",[t._v("Age")]),t._v(" "),a("td",[t._v("Killed by")]),t._v(" "),a("td",[t._v("KBP Link")]),t._v(" "),a("td",[t._v("News Link")])])])}]};var o=a("VU/8")({data:function(){return{}},methods:{}},r,!1,function(t){a("LYrU")},"data-v-696bfd0a",null).exports,i=a("fZjL"),s=a.n(i),l=a("vwbq"),c={data:function(){return{gender:{men:0,women:0,unreported:0},race:{white:0,black:0,asian:0,latinx:0,unreported:0},state:{},age:{under18:0,a18to24:0,a25to34:0,a35to44:0,a45to55:0,over55:0,unreported:0},month:{jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0}}},methods:{resetData:function(){this.gender={men:0,women:0,unreported:0},this.race={white:0,black:0,asian:0,latinx:0,unreported:0},this.state={},this.age={under18:0,a18to24:0,a25to34:0,a35to44:0,a45to55:0,over55:0,unreported:0},this.month={jan:0,feb:0,mar:0,apr:0,may:0,jun:0,jul:0,aug:0,sep:0,oct:0,nov:0,dec:0}},calculatedData:function(){var t=this;this.resetData(),this.kbpData.forEach(function(e){"M"==e.gender?t.gender.men++:"F"==e.gender?t.gender.women++:t.gender.unreported++,"W"==e.race?t.race.white++:"B"==e.race?t.race.black++:"A"==e.race?t.race.asian++:"L"==e.race?t.race.latinx++:t.race.unreported++,t.state[e.state]?t.state[e.state]++:t.state[e.state]=1,e.age<18?t.age.under18++:e.age>=18&&e.age<25?t.age.a18to24++:e.age>=25&&e.age<35?t.age.a25to34++:e.age>=35&&e.age<45?t.age.a35to44++:e.age>=45&&e.age<55?t.age.a45to55:e.age>=55?t.age.over55++:t.age.unreported++,e.date.match(/jan/i)?t.month.jan++:e.date.match(/feb/i)?t.month.feb++:e.date.match(/mar/i)?t.month.mar++:e.date.match(/apr/i)?t.month.apr++:e.date.match(/may/i)?t.month.may++:e.date.match(/jun/i)?t.month.jun++:e.date.match(/jul/i)?t.month.jul++:e.date.match(/aug/i)?t.month.aug++:e.date.match(/sep/i)?t.month.sep++:e.date.match(/oct/i)?t.month.oct++:e.date.match(/nov/i)?t.month.nov++:e.date.match(/dec/i)&&t.month.dec++}),this.reDraw()},drawAgeChart:function(){var t=[{label:"Under 18",count:this.age.under18},{label:"18 to 24",count:this.age.a18to24},{label:"25 to 34",count:this.age.a25to34},{label:"35 to 44",count:this.age.a35to44},{label:"45 to 54",count:this.age.a45to55},{label:"Over 55",count:this.age.over55},{label:"Unreported",count:this.age.unreported}];this.drawPieChart(t,"#age",["#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#084594","#eff3ff"],"Age")},drawGenderChart:function(){var t=[{label:"Men",count:this.gender.men},{label:"Women",count:this.gender.women},{label:"Unreported",count:this.gender.unreported}];this.drawPieChart(t,"#gender",["#a1d99b","#31a354","#e5f5e0"],"Gender")},drawRaceChart:function(){var t=[{label:"White",count:this.race.white},{label:"Black",count:this.race.black},{label:"Asian",count:this.race.asian},{label:"Latinx",count:this.race.latinx},{label:"Unreported",count:this.race.unreported}];this.drawPieChart(t,"#race",["#cbc9e2","#9e9ac8","#756bb1","#54278f","#f2f0f7"],"Race")},drawPieChart:function(t,e,a,n){l.select(e).html("");var r=l.select(e).node().getBoundingClientRect().width,o=(r=r-20-20)-20-20,i=Math.min(r,o)/2,s=l.scaleOrdinal(a),c=l.select(e).append("svg").attr("width",r).attr("height",o).append("g").attr("transform","translate("+r/2+","+o/2+")"),d=l.arc().innerRadius(i/3).outerRadius(i),u=l.pie().value(function(t){return t.count}).sort(null),h=l.select(e).append("div").attr("class","tooltip").style("display","none"),p=(c.selectAll("path").data(u(t)).enter().append("path").attr("d",d).attr("fill",function(e,a){return t[a].color=s(e.data.label),s(e.data.label)}).on("mouseover",function(t){l.select(this).transition().duration(200).attr("fill","orange"),h.transition().duration(200).style("display","block").style("opacity",.9),h.text(t.data.label+": "+t.data.count).style("left",l.event.pageX-30+"px").style("top",l.event.pageY-40+"px").style("position","absolute").style("background-color","#EFE8D3").style("padding","5px").style("font-color","steelgrey")}).on("mouseout",function(e){l.select(this).transition().duration(200).attr("fill",function(e,a){return t[a].color=s(e.data.label),s(e.data.label)}),h.transition().duration(500).style("display","none").style("opacity",0)}),l.select(e).append("svg").attr("class","legend").selectAll("g").data(t).enter().append("g").attr("transform",function(t,e){return"translate(0,"+20*e+")"}));p.append("rect").attr("width",18).attr("height",18).style("fill",function(t,e){return s(t.label)}),p.append("text").attr("x",24).attr("y",9).attr("dy",".35em").text(function(t){return t.label+": "+t.count}),c.append("text").attr("x",0).attr("y",6).style("text-anchor","middle").style("font-weight","bold").text(n)},drawStateChartBubble:function(){var t=this;l.select("#state").html("");var e=[];s()(this.state).sort().forEach(function(a,n){e.push({label:a,count:t.state[a]})});var a=0;e.forEach(function(t,e){t.count>a&&(a=t.count)});var n=l.select("#state").node().getBoundingClientRect().width,r={top:50,right:20,bottom:20,left:60};n<400?(r.left=60,n=400):r.left<60&&(r.left=60);var o=(n=n-r.left-r.right)/2-r.top-r.bottom,i=l.select("#state").append("svg").attr("width",n+r.left+r.right).attr("height",o+r.top+r.bottom),c=l.scaleLinear().domain([0,a]).range([o,r.top]),d=l.scaleLinear().domain([0,e.length]).range([r.left,n]),u=l.scaleSqrt().domain([1,a]).range([n/100,n/35]),h=l.axisLeft().scale(c),p=(i.append("g").attr("transform","translate(30,0)").call(h),l.select("#state").append("div").attr("class","tooltip").style("display","none"));i.selectAll("circle").data(e).enter().append("circle").attr("class","circle").attr("fill",function(t,e){return t.count==a?"#A81D40":"#8C92A3"}).attr("cy",function(t,e){return c(t.count)}).attr("cx",function(t,e){return d(e)}).attr("r",function(t,e){return u(t.count)}).style("opacity",.7).on("mouseover",function(t){l.select(this).transition().duration(200).attr("fill","orange"),p.transition().duration(200).style("display","block").style("opacity",.9),p.text(t.label+": "+t.count).style("left",l.event.pageX-30+"px").style("top",l.event.pageY-40+"px").style("position","absolute").style("background-color","#EFE8D3").style("padding","5px").style("font-color","steelgrey")}).on("mouseout",function(t){l.select(this).transition().duration(200).attr("fill",function(t,e){return t.count==a?"#A81D40":"#8C92A3"}),p.transition().duration(500).style("display","none").style("opacity",0)});var f=l.scaleLinear().domain([250,1e3]).range([10,24]);i.append("text").attr("x",n/2).attr("y",50).style("text-anchor","middle").style("font-weight","bold").style("font-size",f(n)+"px").text("Death Count by State")},drawMonthBarChart:function(){l.select("#month").html("");var t=[{label:"January",count:this.month.jan},{label:"February",count:this.month.feb},{label:"March",count:this.month.mar},{label:"April",count:this.month.apr},{label:"May",count:this.month.may},{label:"June",count:this.month.jun},{label:"July",count:this.month.jul},{label:"August",count:this.month.aug},{label:"September",count:this.month.sep},{label:"October",count:this.month.oct},{label:"November",count:this.month.nov},{label:"December",count:this.month.dec}],e=0;t.forEach(function(t){t.count>e&&(e=t.count)});var a=l.select("#month").node().getBoundingClientRect().width,n={top:50,right:20,bottom:20,left:60};a<400?(n.left=60,a=400):n.left<60&&(n.left=60);var r=(a=a-n.left-n.right)/2-n.top-n.bottom,o=l.select("#month").append("svg").attr("width",a+n.left+n.right).attr("height",r+n.top+n.bottom),i=l.scaleLinear().domain([0,e]).range([r,n.top]),s=l.scaleLinear().domain([0,t.length]).range([n.left,a]),c=l.axisLeft().scale(i),d=(o.append("g").attr("transform","translate(30,0)").call(c),l.select("#month").append("div").attr("class","tooltip").style("display","none"));o.selectAll("rect").data(t).enter().append("rect").attr("class","bar").attr("fill",function(t,a){return t.count==e?"#A81D40":"#8C92A3"}).attr("y",function(t,e){return i(t.count)}).attr("x",function(t,e){return s(e)}).attr("width",function(t,e){return a/12-5}).attr("height",function(t,e){return r-i(t.count)}).style("opacity",.7).on("mouseover",function(t){l.select(this).transition().duration(200).attr("fill","orange"),d.transition().duration(200).style("display","block").style("opacity",.9),d.text(t.label+": "+t.count).style("left",l.event.pageX-30+"px").style("top",l.event.pageY-40+"px").style("position","absolute").style("background-color","#EFE8D3").style("padding","5px").style("font-color","steelgrey")}).on("mouseout",function(t){l.select(this).transition().duration(200).attr("fill",function(t,a){return t.count==e?"#A81D40":"#8C92A3"}),d.transition().duration(500).style("display","none").style("opacity",0)});var u=l.scaleLinear().domain([250,1e3]).range([10,24]);o.append("text").attr("x",a/2).attr("y",30).style("text-anchor","middle").style("font-weight","bold").style("font-size",u(a)+"px").text("Death Count by Month")},reDraw:function(){this.drawGenderChart(),this.drawRaceChart(),this.drawAgeChart(),this.drawMonthBarChart(),this.drawStateChartBubble()}},computed:{kbpData:function(){return this.$store.state.cData}},mounted:function(){this.$nextTick(function(){window.addEventListener("resize",this.reDraw)})},created:function(){var t=this.calculatedData;this.$store.watch(function(t){return t.cData},function(e,a){t()})}},d={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("div",{staticClass:"data-wrapper"},[e("div",{attrs:{id:"age"}}),this._v(" "),e("div",{attrs:{id:"gender"}}),this._v(" "),e("div",{attrs:{id:"race"}}),this._v(" "),e("div",{attrs:{id:"state"}}),this._v(" "),e("div",{attrs:{id:"month"}})])])}]};var u={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{},[e("select",{staticClass:"form-control",attrs:{name:"year"},on:{change:this.changeYear}},[e("option",{attrs:{value:""}},[this._v("2018")]),this._v(" "),e("option",{attrs:{value:"kbp2017"}},[this._v("2017")]),this._v(" "),e("option",{attrs:{value:"kbp2016"}},[this._v("2016")]),this._v(" "),e("option",{attrs:{value:"kbp2015"}},[this._v("2015")]),this._v(" "),e("option",{attrs:{value:"kbp2014"}},[this._v("2014")])]),e("br"),e("br"),this._v(" "),e("h3",[this._v("Total: "+this._s(this.$store.state.cData.length))])])},staticRenderFns:[]};var h={name:"app",components:{MainTable:o,D3:a("VU/8")(c,d,!1,function(t){a("jVa0")},"data-v-5fe18795",null).exports,YearSelection:a("VU/8")({data:function(){return{}},methods:{changeYear:function(t){this.$store.commit("getRawData",t)}}},u,!1,function(t){a("6D5C")},"data-v-7b7c7048",null).exports},mounted:function(){this.$store.commit("getRawData")},computed:{}},p={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("h1",[this._v("People killed by police in "+this._s(this.$store.state.year))]),this._v(" "),this._m(0),this._v(" "),e("p",[e("a",{attrs:{href:"https://github.com/iampeternguyen/killed-by-police-data"}},[this._v("GitHub Source")]),this._v(" "),e("YearSelection"),this._v(" "),e("D3"),this._v(" "),e("MainTable")],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",[this._v("Data from "),e("a",{attrs:{href:"http://killedbypolice.net/"}},[this._v("Killed by Police")])])}]};var f=a("VU/8")(h,p,!1,function(t){a("Z99i")},null,null).exports,v=a("NYxO");n.a.use(v.a);var g=new v.a.Store({state:{kbpData:{y2018:[],y2017:[],y2016:[],y2015:[],y2014:[]},rawData:[],selectedYear:"",year:"",cData:[]},getters:{},mutations:{getRawData:function(t,e){t.selectedYear=e?e.target.value:"";var a=new XMLHttpRequest,n=function(){return""==t.selectedYear?2018:(n=/\d{4}/gi.exec(t.selectedYear))[0]};if(t.year=n(),t.cData=t.kbpData["y"+t.year],0!=t.kbpData["y"+t.year].length)console.log("Already retrieved data");else{a.onreadystatechange=function(){if(4==this.readyState&&200==this.status){var e=[],a=/\<td\>/gi;this.responseText.split(/\<tr\>/gi).forEach(function(t){var n=t.split(a);8===n.length&&e.push(n)}),e.splice(0,2),function(e){function a(t){var e=/(?:<center>)*(?:\(.*\))*\s*([A-Z].*)/g,a=e.exec(t[1]),n=a[1],r=t[2],o=void 0,i=void 0;2===(a=t[3].split("/")).length?(o=a[0],i=a[1]):1===a.length&&""==!(a=a[0].replace(/\s*/g,""))&&(o=a);var s=void 0,l=void 0,c=void 0;2===(a=t[4].split(/[,\">]/g)).length?(s=a[0],l=a[1].replace(/\s*/g,"")):a.length>2?(s=a[3],c=a[1],a[4]&&(l=a[4].replace(/\s*/g,""))):(a=(e=/(^[A-Z].*)/g).exec(a[0]))&&(s=a[0]),l=(l=/\d*/.exec(l))[0];var d=[];a=t[5].split(/[<>]/);for(var u=2;u<=a.length;u++)u%2==0&&d.push(a[u]);var h=(a=t[6].split('"'))[1],p=(a=t[7].split('"'))[1];return{date:n,state:r,gender:o,race:i,name:s,age:l,photo:c,killedBy:d,kbpLink:h,newsLink:p}}e.forEach(function(e){var n,r=(n=/<br>/gi.exec(e[1]))?n.length+1:1;if(r>1)for(var o=function(t,e){for(var a=void 0,n=0;n<=7;n++)if(a=t[n],0==n||2==n||5==n||6==n||7==n){t[n]=[];for(var r=0;r<e;r++)a.search(/<br>/gi)&&(a=(a=a.split(/<br>/gi))[0]),t[n].push(a)}else t[n]=a.split(/<br>/gi);return t}(e,r),i=0;i<r;i++){for(var s=[],l=0;l<=7;l++)s.push(o[l][i]);t.kbpData["y"+t.year].push(a(s))}else t.kbpData["y"+t.year].push(a(e))})}(e)}};var r="https://cors-anywhere.herokuapp.com/http://www.killedbypolice.net/"+t.selectedYear;a.open("GET",r,!0),a.send()}}}});n.a.config.productionTip=!1,new n.a({el:"#app",template:"<App/>",store:g,components:{App:f}})},Z99i:function(t,e){},jVa0:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.90790ec3031606a01bf3.js.map